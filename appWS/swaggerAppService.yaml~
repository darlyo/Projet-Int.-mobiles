swagger: '2.0'
info:
  title: APP Web Service
  version: "2.0.0"
schemes:
  - https
# will be prefixed to all paths
basePath: /v1
produces:
  - application/json
paths:
  /app/messages:
    post:
      description: |
        Collect messages according to Distance and date by android mobile
      parameters:
        - name: latitude
          in: query
          description: Latitude component of location.
          required: true
          type: number
          format: double
        - name: longitude
          in: query
          description: Longitude component of location.
          required: true
          type: number
          format: double
        - name: radius
          in: query
          description: Distance from geocoding.
          required: true
          type: number
          format: double
        - name: hours
          in: query
          description: Hours of posted messages.
          required: true
					type: number
          format: float
				- name: date
          in: query
          description: Date of posted message
          required: true
          type: string
				- name: token
          in: query
          description: request of connexion.
          required: true
          type: integer
          format: int32
      tags:
        - Collect messages
      responses:
        200:
          description: An array of messages
          schema:
            type: array
            items:
              $ref: '#/definitions/Message'
        400:
          description: Error bad request from customer
          schema:
            type: array
            items:
              $ref: '#/definitions/Error400'
        500:
          description: Error of communication with BDD
          schema:
            type: array
            items:
              $ref: '#/definitions/Error500'
        
    
  
  /app/message:
    post:
      description: Creating a message by android mobile
      parameters:
        - name: longitude
          in: query
          description: Longitude component of location.
          required: true
          type: number
          format: double
        - name: latitude
          in: query
          description: Latitude component of location.
          required: true
          type: number
          format: double
        - name: popularity
          in: query
          description: Popularity for each topic
          required: true
          type: integer
          format: int32
        - name: date
          in: query
          description: Date of posted message
          required: true
          type: string
        - name: hours
          in: query
          description: Hours of posted message
          required: true
          type: number
					format: float
        - name: topic
          in: query
          description: Name of posted message
          required: true
          type: string
				- name: token
          in: query
          description: request of connexion.
          required: true
          type: integer
          format: int32
      tags:
        - Create message
      responses:
        200:
          description: An message of validation
          schema:
            type: array
            items:
              $ref: '#/definitions/MessageOk'
        400:
          description: Error bad request from customer
          schema:
            type: array
            items:
              $ref: '#/definitions/Error400'
        500:
          description: Error of communication with BDD
          schema:
            type: array
            items:
              $ref: '#/definitions/Error500'
          
  /app/popularity/key:
    post:
      description: The customer shares the topic of the message
      parameters:
        - name: key
          in: query
          description: ID of topic
          required: true
          type: integer
          format: int32
				- name: token
          in: query
          description: request of connexion.
          required: true
          type: integer
          format: int32
      tags:
        - Share topic
      responses:
        200:
          description: Share the topic OK
          schema:
            type: array
            items:
             $ref: '#/definitions/MessageOk'
        400:
          description: Error bad request from customer
          schema:
            type: array
            items:
              $ref: '#/definitions/ErrorKey'
        500:
          description: Error of communication with BDD
          schema:
            type: array
            items:
              $ref: '#/definitions/Error500'
definitions:
  Message:
    type: object
    properties:
      id:
        type: string
        description: ID message 
      longitude:
        type: string
        description: Longitude component location
      latitude:
        type: string
        description: Latitude component location
      popularity:
        type: string
        description: number of people who like the topic
      date:
        type: string
        description: Date of message posted
      hours:
        type: string
        description: Hours of message posted
      topic:
        type: string
        description: Name of message posted
  Error400:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
  Error500:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
  MessageOk:
    type: object
    properties:
      code:
        type: string
      message:
        type: string
        description: Message topic OK
  ErrorKey:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
        description: Error ID  
